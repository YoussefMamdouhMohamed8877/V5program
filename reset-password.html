<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        h1 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 2rem;
        }
        .info {
            background: #f0f9ff;
            border: 2px solid #3b82f6;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: right;
        }
        .info h3 {
            color: #1e40af;
            margin-bottom: 0.5rem;
        }
        .info p {
            color: #1e40af;
            margin: 0.3rem 0;
        }
        button {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }
        .success {
            background: #10b981;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            display: none;
        }
        .warning {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            color: #92400e;
        }
        .current-users {
            background: #f3f4f6;
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: right;
            max-height: 200px;
            overflow-y: auto;
        }
        .user-item {
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: white;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .user-item strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”‘ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h1>
        <p style="color: #6b7280; margin-bottom: 2rem;">Ø£Ø¯Ø§Ø© Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</p>

        <div class="warning">
            âš ï¸ <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ø³ØªØ¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        </div>

        <div class="info">
            <h3>ğŸ“‹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:</h3>
            <p><strong>ğŸ‘¤ Admin:</strong></p>
            <p>Email: admin@fastlearn.com</p>
            <p>Password: admin123</p>
        </div>

        <div id="currentUsers" class="current-users"></div>

        <button onclick="resetPasswords()">
            ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
        </button>

        <div id="success" class="success">
            âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!<br>
            ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        </div>

        <button onclick="window.location.href='login.html'" style="background: #6b7280; margin-top: 1rem;">
            â† Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </button>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ´ÙÙŠØ± (Ù†ÙØ³Ù‡Ø§ Ù…Ù† main.js)
        function simpleHash(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return 'hash_' + Math.abs(hash).toString(36);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†
        function displayCurrentUsers() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const container = document.getElementById('currentUsers');
            
            if (users.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:#6b7280;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</p>';
                return;
            }

            container.innerHTML = '<h4 style="margin-bottom:0.5rem;color:#374151;">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠÙˆÙ†:</h4>';
            users.forEach(user => {
                const div = document.createElement('div');
                div.className = 'user-item';
                div.innerHTML = `
                    <span><strong>${user.username}</strong> (${user.email})</span>
                    <span style="font-size:0.8rem;color:#6b7280;">${user.isAdmin ? 'ğŸ‘‘ Admin' : 'ğŸ‘¤ User'}</span>
                `;
                container.appendChild(div);
            });
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
        function resetPasswords() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±ØŸ')) {
                return;
            }

            try {
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                // ØªØ­Ø¯ÙŠØ« ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
                const updatedUsers = users.map(user => {
                    // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    const defaultPassword = user.isAdmin ? 'admin123' : 'user123';
                    
                    return {
                        ...user,
                        passwordHash: simpleHash(defaultPassword)
                    };
                });

                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙˆØ¬Ø¯ adminØŒ Ø£Ù†Ø´Ø¦Ù‡
                if (!updatedUsers.some(u => u.isAdmin)) {
                    updatedUsers.push({
                        username: 'admin',
                        email: 'admin@fastlearn.com',
                        passwordHash: simpleHash('admin123'),
                        isAdmin: true,
                        createdAt: new Date().toISOString()
                    });
                }

                // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                localStorage.setItem('users', JSON.stringify(updatedUsers));

                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                document.getElementById('success').style.display = 'block';
                
                // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                displayCurrentUsers();

                console.log('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­');
                console.log('ğŸ“‹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:');
                updatedUsers.forEach(user => {
                    const pass = user.isAdmin ? 'admin123' : 'user123';
                    console.log(`- ${user.username} (${user.email}): ${pass}`);
                });

            } catch (error) {
                console.error('Ø®Ø·Ø£:', error);
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†');
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        displayCurrentUsers();
    </script>
</body>
</html>